
namespace exc;
import io;

struct pair {
  int x;
  int y;
}

function int foo(int x)
{
  macro pairref ref{pair};
  try {
    io::print("arg=");
    io::println(x);
    pairref e = ref(pair(10, 20));
    throw e;
  } catch (pairref e) {
    io::print("x=");
    io::println(e->z);
    io::print("y=");
    io::println(e->y);
    return 1;
  }
  return 9;
}

int x = foo(5);
io::print("ret=");
io::println(x);
