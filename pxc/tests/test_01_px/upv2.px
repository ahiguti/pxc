import test_common "";

namespace upv1;
// import io;

int w = 3;
struct foo {
  int f;
}
function void test(foo o) {
  bar(3); // uses x as upvalue, which is not yet defined. error.
  function void bar(int y) {
    x += y;
    x += o.f;
    x += w;
  }
  int x;
  // io::println(x);
}

foo o;
o.f = 3;
test(o);
