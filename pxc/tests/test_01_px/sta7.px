
namespace sta7;
import test_common "";

struct foo {
  int first;
  int second;
  function int add() { return first + second; }
}

macro fooarr vector{ptr{foo}};

function foo sum(foo a, foo b, foo c)
{
  return foo(a.first + b.first + c.first, a.second + b.second + c.second);
}

function void sttest1()
{
  fooarr arr;
  arr.resize(3, ptr(foo()));
  arr[0] = arr[1] = arr[2] = ptr(foo());
  arr[0]->first = 2;
  arr[0]->second = 3;
  arr[1]->first = 2;
  arr[1]->second = 3;
  arr[2]->first = 2;
  arr[2]->second = 3;
  foo s = sum(*arr[0], *arr[1], *arr[2]);
  io::println(s.first);
  io::println(s.second);
}

sttest1();

