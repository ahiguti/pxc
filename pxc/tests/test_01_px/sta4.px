
namespace sta4;
import common -;

struct foo {
  int first;
  int second;
  function int add() { return first + second; }
}

macro fooarr vector{foo};
macro fooptrarr vector{ptr{foo}};

function void fooarg(foo x)
{
}

function int addint(int x, int y)
{
  return x + y;
}

function void sttest1()
{
  fooptrarr arr;
  arr.resize(100, ptr{foo}(foo()));
  arr[10] = ptr{foo}(foo(10, 10));
  fooarg(*arr[10]);
  arr[11] = ptr{foo}(foo());
  arr[11]->first = 10;
  arr[11]->second = 20;
  int r = addint(arr[11]->first, arr[11]->second);
  println(r);
}

sttest1();

