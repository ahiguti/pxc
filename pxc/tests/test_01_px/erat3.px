
namespace erat3;
import common -;

macro uivec vector{uint};
macro uivecref ptr{uivec};

function uivecref eratosthenes(uint x)
{
  uivec sieve;
  sieve.resize(x, 0);
  sieve[1] = 1;
  uivecref ret = uivecref(uivec());
  uint i;
  for (i = 2; i < x; ++i) {
    if (sieve[i] == 0) {
      ret->push_back(i);
      uint j;
      for (j = i * i; j < x; j += i) {
	sieve[j] = 1;
      }
    }
  }
  return ret;
}

uivecref arr = eratosthenes(100000);
size_t i;
for (i = 0; i < arr->size(); ++i) {
  println((*arr)[i]);
}

