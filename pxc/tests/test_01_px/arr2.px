
namespace arr2;
import test_common "";

extern "arr2::push_back" function {t}
  void push_back(vector{t}& vec, t const& val);
extern "arr2::pop_back" function {t}
  t pop_back(vector{t}& vec);

extern "fdef" inline
namespace arr2 {
template <typename T> void
push_back(array::vector<T>& v, const T& x)
{
  v.push_back(x);
}
template <typename T> T
pop_back(array::vector<T>& v)
{
  if (v.empty()) {
    T rv = T();
    return rv;
  } else {
    T rv = v[v.size() - 1];
    v.pop_back();
    return rv;
  }
}
}; // namespace array

function void t1()
{
  macro intvec vector{int};
  intvec v;
  push_back(v, 3);
  push_back(v, 5);
  push_back(v, 30);
  int x = pop_back(v);
  println(x);
  println(pop_back(v));
  println(pop_back(v));
  println(pop_back(v));
  println(pop_back(v));
}

t1();

