
namespace list;
import io;

union {t} list {
  unit null;
  ptr{cons{t}} value;
}

struct {t} cons {
  t head;
  list{t} rest;
}

function {t} size_t length(list{t} xs) {
  if (case xs.null) {
    return 0;
  } else {
    return length(xs.value->rest) + 1;
  }
}

function {t} list{t} makecons(t head, list{t} rest)
{
  list{t} r;
  r.value = ptr(cons{t}(head, rest));
  return r;
}

