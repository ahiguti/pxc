
import io;
import array;

struct intpair {
  int first;
  int second;
  function int add() { return first + second; }
}

macro intref ref{int};
macro intpairref ref{intpair};
macro intpairarr vector{intpair};
macro intpairrefarr vector{intpairref};

function intref add_intref(intref xr, intref yr)
{
  intref r = *xr + *yr;
  return r;
}

function void sttest1()
{
  int x = 3;
  intref xr = x;
  int y = 4;
  intref yr = y;
  intref zr = add_intref(xr, yr);
  io::println(*zr);
}

function void sttest2()
{
  intpairref x = intpair();
  x->first = 5;
  x->second = 8;
  io::println(x->add());
}

sttest1();
sttest2();

