
namespace ttest;
import thread "";
import io;

threaded function void my_thread_main(tref{my_thread_shared} sd)
{
  println("my thread main");
  println(sd->x);
  println(sd->y);
}

multithreaded struct my_thread_shared {
  int x;
  int y;
}

tref{my_thread_shared} sd = my_thread_shared(123, 456);
thread_ref thr = sys.create_thread_func
  {tref{my_thread_shared}, my_thread_main}(sd);
thr.join();

