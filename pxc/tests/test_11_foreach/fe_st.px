namespace fe_st;
import test_common "";
import meta::builtin m;


function {t} void field_to_string(t fld, string& str_r)
{
  str_r.append(" ");
  str_r.append(m::symbol{t, m::concat{t, "_to_string"}}(fld));
}

struct foo {
  int x;
  long y;
}

function void test()
{
  foo f;
  f.x = 20;
  f.y = 35;
  int i;
  string s = "(";
  foreach (fld : foo) {
    field_to_string(f.fld, s);
  }
  s.append(" )");
  println(s);
}

test();

