
namespace byref2;
import common -;

threaded interface ifoo {
  function int get_int() const;
}

threaded struct foo < ifoo > {
  int value;
  function int get_int() const { return value; }
}

function int f1(foo& f)
{
  f.value += 1;
  return f.value;
}

function int f2(ifoo& f)
{
  return f.get_int();
}

foo f = foo(100);
println(f.value);
println(f1(f));
println(f2(f));

