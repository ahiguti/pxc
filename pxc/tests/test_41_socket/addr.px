namespace addr;
import common -;
import io::addrinfo -;

function void t1()
{
  const ai = addrinfo(io::system, "localhost", "", AF_INET, SOCK_STREAM,
    PROTO_UNSPEC, 0);
  print("empty=");
  println(ai.empty());
  if (ai.get_error() != gai_error_t()) {
    print("error=");
    println(ai.get_error());
  }
  sockaddr_storage sa = ai.get_sockaddr();
  println("addr=");
  ulong a = sa.get_in_addr();
  println((a >> 24) & 255);
  println((a >> 16) & 255);
  println((a >> 8) & 255);
  println((a >> 0) & 255);
}

t1();

