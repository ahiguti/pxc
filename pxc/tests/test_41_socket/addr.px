namespace addr;
import test_common "";
import io::net::addrinfo "";

function void t1()
{
  var ai = addrinfo(io::io, "localhost", "", AF_INET, SOCK_STREAM,
    PROTO_UNSPEC, 0);
  print("empty=");
  println(ai.empty());
  print("error=");
  println(ai.get_error());
  println(ai.get_error_string());
  sockaddr_storage sa = ai.get_sockaddr();
  println("addr=");
  ulong a = sa.get_in_addr();
  println((a >> 24) & 255);
  println((a >> 16) & 255);
  println((a >> 8) & 255);
  println((a >> 0) & 255);
}

t1();

