import common -;
namespace itmpl0;

threaded interface {t} comparable {
  function int compare(t x, t y) const;
}

threaded struct compare_object {
  function int compare(foo x, foo y) const {
    if (x.v < y.v) {
      return -1;
    } else if (x.v > y.v) {
      return 1;
    }
    return 0;
  }
}

threaded struct foo {
  int v;
}

foo x = foo(10);
foo y = foo(20);
ptr{compare_object} c = ptr{compare_object}(compare_object());
int v = c->compare(x, y);
println(v);
