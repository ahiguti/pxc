
namespace interf_ptr;
import io;

interface ifoo {
  function void m1() const;
}

struct foo : ifoo : {
  function void m1() const {
    io::println("m1");
  }
}

function void test2(ref{ifoo} x)
{
  x->m1();
}

struct bar(int x) {
  ref{ifoo} fp = ref(foo());
}

function void test1()
{
  bar b;
  // ref{ifoo} f = foo();
  test2(b.fp);
}

test1();
