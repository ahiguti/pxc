
namespace hoge;
import meta;
import io;

foo x;
show_symbol(x);

function {t} void show_symbol(t x) {
  macro sname meta::concat{t, "_to_string"};
  macro sym meta::symbol{t, sname};
  if (meta::eq{meta::to_string{sym}, sname}) {
    io::println(sym(x));
  } else {
    io::println("func not found");
  }
}

function string foo_to_string(foo f) {
  return "foo_str";
}

struct foo {
}

