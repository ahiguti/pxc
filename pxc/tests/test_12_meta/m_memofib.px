import common -;

namespace m_memofib;
import meta::common -;

struct {x} sfib {
  metafunction val
    cond{lt{x, 2}, x, add{sfib{sub{x, 2}}:val, sfib{sub{x, 1}}:val}};
}

// metafunction fib{x} cond{lt{x, 2}, x, add{fib{sub{x, 2}}, fib{sub{x, 1}}}};

metafunction fib{x} sfib{x}:val;

int v = fib{10};
println(v);

