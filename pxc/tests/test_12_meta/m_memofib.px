import common -;

namespace m_memofib;
import meta::builtin -;

struct {x} sfib {
  macro val
    metaif{lt{x, 2}, x, add{sfib{sub{x, 2}}::val, sfib{sub{x, 1}}::val}};
}

// macro fib{x} metaif{lt{x, 2}, x, add{fib{sub{x, 2}}, fib{sub{x, 1}}}};

macro fib{x} sfib{x}::val;

int v = fib{10};
println(v);

