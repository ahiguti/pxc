import common -;

namespace constmet;

threaded struct foo {
  int x;
  function int m(int y) {
    return x + y;
  }
}

{
  ptr{foo} v = make_ptr(foo(10));
  println(v->m(20)); // calling non-const method. ok.
}
