import common -;

namespace imethod;

interface ifoo {
  function void add(int x);
  function int get();
}

struct foo < ifoo > {
  int v;
  function void add(int x) {
    v += x;
  }
  function int get() {
    return v;
  }
}

function void test1() {
  ptr{foo} f0 = make_ptr{foo}(foo(3));
  ptr{ifoo} f = f0;
  f->add(15);
  println(f->get());
}

test1();

