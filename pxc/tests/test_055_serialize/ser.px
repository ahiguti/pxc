public namespace ser;
import common -;
import text::serialize -;
import text::conversion -;

struct foo {
  int x;
  string y;
}

function void t1()
{
  vector{foo} a;
  a.push_back(foo(55, "abc"));
  a.push_back(foo(88, "xyz"));
  println(a);
  string s = to_string(a);
  cstrref sr = s;
  vector{foo} b;
  deserialize_from_string_emplace{vector{foo}}(sr, b);
  println(b);
  string s1 = to_string(b);
  if (s == s1) {
    println("string eq");
  }
}

t1();

