namespace ptr1;
import common -;
import pointer -;

interface ifoo {
  function int f(int x);
}

struct foo < ifoo > {
  function int f(int x) { return x * 2; }
}

function void t1()
{
  const p = to_ptr(foo());
  ptr{ifoo} ip = p;
  ptr{foo} q = pointer_downcast{ptr{foo}, ptr{ifoo}}(ip);
  int z = q->f(5);
  println(z);
}

t1();

