import common -;

namespace m_globals2;
import meta m;

struct bar {
  int f1;
  long f2;
  function int hoge(int x, string y) {
    return x;
  }
  function ptr{string} fuga(int x, string y) {
    ptr{string} r = to_ptr{string}(y);
    return r;
  }
}

metafunction ns_types m::types{"m_globals2"};
metafunction finfo{f} m::concat{
  f, ":",
  m::rettype{f}, ":",
  m::argtypes{f}};
metafunction tinfo{t} m::concat{
  t, ":",
  m::field_names{t}, ":",
  m::field_types{t}, ":",
  m::map{m::member_functions{t}, finfo}};
println(m::to_string{m::map{ns_types, tinfo}});

