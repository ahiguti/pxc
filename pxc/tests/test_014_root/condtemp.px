
public namespace condtemp;
import common -;

function int inc(int mutable& x, int y)
{
  return (++x) + y;
}

function int bar(vector{int} mutable& p)
{
  return p[0];
}

function int foo(vector{int} mutable& p)
{
  if (inc(p[3], bar(p)) == 1000) { // calling bar() can possibly invalidate p[3]
    return 3;
  }
  return 5;
}

vector{int} p;
p.resize(10, int());
p[3] = 999;
int a = foo(p);
println(a);
