public namespace fp1;
public import common -;
public import funcptr -;

threaded function void hoge(int mutable& x)
{
  x *= 2;
}

function {tf, tx} void repeat(tf const& f, tx mutable& x)
{
  for (size_t i: 0 .. 5) {
    f(x);
  }
}

{
  int x = 3;
  funcptr{int} fp = to_funcptr{hoge}();
  repeat(fp, x);
  println(x);
}
