
namespace arraymod;
import common -;

struct foo {
}

function void mod(foo mutable& e, vector{foo} mutable& a) {
  a.clear();
}

function void test1() {
  vector{foo} arr;
  // int zzz;
  arr.resize(100, foo());
  arr.resize(101, foo());
  mod(arr[0], arr);
}

try {
  println("1");
  test1();
  println("2");
} catch (exception::would_invalidate e) {
  println("exc");
}

